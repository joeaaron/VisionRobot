(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{618:function(t,a,s){t.exports=s.p+"assets/img/image-20210418201103465.0b1b7926.png"},619:function(t,a,s){t.exports=s.p+"assets/img/image-20210418201844586.f4f0256b.png"},936:function(t,a,s){"use strict";s.r(a);var v=s(22),_=Object(v.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"动静分离"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#动静分离"}},[t._v("#")]),t._v(" 动静分离")]),t._v(" "),v("h2",{attrs:{id:"动静分离的特点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#动静分离的特点"}},[t._v("#")]),t._v(" 动静分离的特点")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("分布式：把动态的 API 接口和静态资源分离开")]),t._v(" "),v("p",[t._v("本质上是分布式，因为静态资源（如图片）等可以被浏览器缓存，CDN 加速，这就提高了这一块的吞吐量")])]),t._v(" "),v("li",[v("p",[t._v("前后端解耦")])]),t._v(" "),v("li",[v("p",[t._v("静态资源由 nginx 管理")])]),t._v(" "),v("li",[v("p",[t._v("接口服务化：接口单独部署，作为集群部署")]),t._v(" "),v("p",[t._v("可以为不同的端，如：安卓、IOS、小程序提供服务")])])]),t._v(" "),v("h2",{attrs:{id:"动静数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#动静数据"}},[t._v("#")]),t._v(" 动静数据")]),t._v(" "),v("ul",[v("li",[t._v("静态数据：css、js、html 等")]),t._v(" "),v("li",[t._v("动态数据：得到的响应可能会和上一次不同")])]),t._v(" "),v("h2",{attrs:{id:"动静分离实现方式-cdn"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#动静分离实现方式-cdn"}},[t._v("#")]),t._v(" 动静分离实现方式 - CDN")]),t._v(" "),v("p",[v("img",{attrs:{src:s(618),alt:"image-20210418201103465"}})]),t._v(" "),v("p",[t._v("CDN：内容分发网络，简单说，静态资源会存在云 CDN 提供商的服务器上，在不同地域的服务器上都会存在，当用户访问的时候，会就近分配服务器节点提供服务")]),t._v(" "),v("blockquote",[v("p",[t._v("有关 CDN 更详细的知识，请参考 "),v("a",{attrs:{href:"https://zq99299.github.io/note-book2/http-protocol/07/04.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP 协议中的 CDN 章节"),v("OutboundLink")],1)])]),t._v(" "),v("p",[t._v("比如这个地址")]),t._v(" "),v("div",{staticClass:"language-bash line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("https://cdn.jsdelivr.net/npm/vue@2.6.9/dist/vue\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[t._v("它就会按你访问的 IP 就近分配一个离你近的节点，以打到加速访问的效果")]),t._v(" "),v("h2",{attrs:{id:"动静分离实现方式-nginx"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#动静分离实现方式-nginx"}},[t._v("#")]),t._v(" 动静分离实现方式 - Nginx")]),t._v(" "),v("p",[t._v("我们这里学习该方案")]),t._v(" "),v("p",[v("img",{attrs:{src:s(619),alt:"image-20210418201844586"}})]),t._v(" "),v("ul",[v("li",[v("p",[t._v("静态资源：一般使用一级域名访问")]),t._v(" "),v("p",[t._v("上图中列出了两种方式：")]),t._v(" "),v("ul",[v("li",[t._v("第一种：使用一台 nginx 来提供静态资源服务")]),t._v(" "),v("li",[t._v("第二种：使用 nginx 集群来提供静态资源，统一的入口再转发到这个集群上")])])]),t._v(" "),v("li",[v("p",[t._v("动态资源：一般使用二级域名，如上面的 api.xx.com")]),t._v(" "),v("p",[t._v("会转发到 tomcat 集群上")])])]),t._v(" "),v("h2",{attrs:{id:"动静分离的问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#动静分离的问题"}},[t._v("#")]),t._v(" 动静分离的问题")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("跨域：")]),t._v(" "),v("p",[t._v("解决的方式：")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("前后使用同一个域名，后端用 nginx 代理转发")]),t._v(" "),v("p",[t._v("这个笔者唯一能想到的缺点就是浏览器对同一个域名的链接限制")])]),t._v(" "),v("li",[v("p",[t._v("SpringBoot 开启对跨域的支持、Nginx 允许跨域、jsonp")])])])]),t._v(" "),v("li",[v("p",[t._v("分布式会话")]),t._v(" "),v("p",[t._v("分布式缓存中间件 Redis 来解决")])])])])}),[],!1,null,null,null);a.default=_.exports}}]);