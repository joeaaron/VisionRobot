(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{560:function(t,s,n){t.exports=n.p+"assets/img/image-20210404163451669.9e0da3bf.png"},916:function(t,s,n){"use strict";n.r(s);var a=n(22),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"nginx-安装与运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装与运行"}},[t._v("#")]),t._v(" Nginx 安装与运行")]),t._v(" "),a("p",[t._v("可以通过 "),a("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx 官网下载页面"),a("OutboundLink")],1),t._v(" 进行下载，本课程使用 "),a("a",{attrs:{href:"http://nginx.org/download/nginx-1.16.1.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx-1.16.1"),a("OutboundLink")],1),t._v(" 这个版本")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("安装依赖环境")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 gcc 环境")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc-c++\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 PCRE 库，用于解析正则表达式")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y pcre pcre-devel\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# zlib 压缩和解压缩依赖")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y zlib zlib-devel\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# SSL 安全的加密的套接字协议层，用于 HTTP 安全传输，也就是 https")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y openssl openssl-devel\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("解压后，将源码进行编译后才能安装")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf nginx-1.16.1.tar.gz\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建 nginx 临时目录，否则有可能在启动 nginx 的过程中会报错")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /var/temp/nginx -p\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入 nginx 源码目录，进行 configure，主要目的是创建 makefile 文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \\ 表示在命令行中换行，提高可读性")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" nginx-1.16.1/\n./configure\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --pid-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/run/nginx/nginx.pid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --lock-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lock/nginx.lock "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --error-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx/error.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --http-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx/access.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_gzip_static_module "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --http-client-body-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/temp/nginx/client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --http-proxy-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/temp/nginx/proxy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --http-fastcgi-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/temp/nginx/fastcgi "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --http-uwsgi-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/temp/nginx/uwsgi "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --http-scgi-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/temp/nginx/scgi\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("p",[t._v("配置命令的含义如下")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"right"}},[t._v("令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("解释")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–prefix")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("指定 nginx 安装目录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–pid-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("指向 nginx 的 pid")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–lock-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("锁定安装文件，防止被恶意篡改或误操作")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–error-log")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("错误日志")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–http-log-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("http 日志")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–with-http_gzip_static_module")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("启用 gzip 模块，在线实时压缩输出数据流")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–http-client-body-temp-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设定客户端请求的临时目录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–http-proxy-temp-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设定 http 代理临时目录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–http-fastcgi-temp-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设定 fastcg i临时目录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–http-uwsgi-temp-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设定 uwsgi 临时目录")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v("–http-scgi-temp-path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设定 scgi 临时目录")])])])])]),t._v(" "),a("li",[a("p",[t._v("编译并安装")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("启动、重新加载、停止 nginx")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/nginx/sbin/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动")]),t._v("\n./nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止")]),t._v("\n./ nginx -s stop\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新加载配置文件")]),t._v("\n./nginx -s reload\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检测配置文件是否有错误")]),t._v("\n./nginx -t\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[t._v("如果提示 80 端口被占用")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 80 端口是否被占用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -nat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("':80'")]),t._v("\ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" :::80                   :::*                    LISTEN \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看是那个进程占用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@study sbin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat -pan | grep ':80'")]),t._v("\ntcp6       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" :::80                   :::*                    LISTEN      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1392")]),t._v("/httpd \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可以看到是 1392 httpd 服务占用了，kill 掉它")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1392")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])])])]),t._v(" "),a("p",[t._v("访问 "),a("code",[t._v("http://192.168.56.105/")]),t._v(" 查看是否有 "),a("code",[t._v("Welcome to nginx!")]),t._v(" 字样的页面，")]),t._v(" "),a("p",[a("img",{attrs:{src:n(560),alt:"image-20210404163451669"}})]),t._v(" "),a("p",[t._v("注意：如果访问不到，请检查端口是否有暴露出来")]),t._v(" "),a("p",[t._v("该页面的内容在 "),a("code",[t._v("/usr/local/nginx/html/index.html")]),t._v(" 中，你可以尝试修改下该文件内容，再次访问看看内容是否有改变")])])}),[],!1,null,null,null);s.default=e.exports}}]);