(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{636:function(s,a,t){s.exports=t.p+"assets/img/yunpc.a93fee32.png"},637:function(s,a,t){s.exports=t.p+"assets/img/image-20210225214202858.730f993a.png"},638:function(s,a,t){s.exports=t.p+"assets/img/yunpc2.cd713e2d.png"},639:function(s,a,t){s.exports=t.p+"assets/img/image-20210225222917112.10475c11.png"},640:function(s,a,t){s.exports=t.p+"assets/img/image-20210227223624775.b935f4a3.png"},641:function(s,a,t){s.exports=t.p+"assets/img/image-20210227224040366.7bad9363.png"},642:function(s,a,t){s.exports=t.p+"assets/img/image-20210227224655687.a5909482.png"},871:function(s,a,t){"use strict";t.r(a);var n=t(22),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"云服务器购买及安装配置-jdk-tomcat-mariadb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云服务器购买及安装配置-jdk-tomcat-mariadb"}},[s._v("#")]),s._v(" 云服务器购买及安装配置(JDK/Tomcat/MariaDB)")]),s._v(" "),n("h2",{attrs:{id:"前置必备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前置必备"}},[s._v("#")]),s._v(" 前置必备")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("云服务器 或 本地虚拟机")]),s._v(" "),n("p",[s._v("部署项目，如果有云服务器则用云服务器，没有则可以使用本地虚拟机来部署，充当线上环境")])]),s._v(" "),n("li",[n("p",[s._v("Linux 系统基础")]),s._v(" "),n("p",[s._v("你需要懂一些 Linux 的基础知识")])]),s._v(" "),n("li",[n("p",[s._v("内网互通")]),s._v(" "),n("p",[s._v("因为需要安装多台虚拟机，所以需要这些虚拟机内网互通")])])]),s._v(" "),n("h2",{attrs:{id:"云服务器购买建议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云服务器购买建议"}},[s._v("#")]),s._v(" 云服务器购买建议")]),s._v(" "),n("p",[s._v("这里以 "),n("a",{attrs:{href:"buy.cloud.tencent.com"}},[s._v("腾讯云服务器")]),s._v(" 举例说明")]),s._v(" "),n("p",[n("img",{attrs:{src:t(636),alt:"yunpc"}})]),s._v(" "),n("p",[s._v("需要注意的有如下项（这些每个云服务器厂商购买页面都有说明），特别注意的是一些通用概念：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("地域")]),s._v(" "),n("p",[s._v("腾讯云云服务器托管机房分布在全球多个位置，由不同的地域（region）构成。每个地域（region）都指一个独立的物理数据中心，不同地域间的云服务器内网不互通。")]),s._v(" "),n("p",[s._v("服务器购买后，不能更换区域，除非重新购买服务器")])]),s._v(" "),n("li",[n("p",[s._v("可用区")]),s._v(" "),n("p",[s._v("每个地域内都有多个物理上相互隔离的位置，称为可用区（zone）。每个可用区都是独立的，同一地域下的可用区通过低时延的内网链路相连。同一地域下的不同可用区间的云服务器可以通过内网互相访问")])]),s._v(" "),n("li",[n("p",[s._v("网络")]),s._v(" "),n("p",[s._v("默认为私有网络/子网，购买服务器后，可以去新建私有网络或子网")])]),s._v(" "),n("li",[n("p",[s._v("实例")]),s._v(" "),n("p",[s._v("重要的就是选择 CPU 核数，一般 16 核、32G 服务器就很不错了，根据需要选择")]),s._v(" "),n("p",[s._v("它的 CPU 高低还和内网带宽绑定，这个挑选时需要注意")])]),s._v(" "),n("li",[n("p",[s._v("镜像")]),s._v(" "),n("p",[s._v("也就是选择服务器系统，一般选择  CentOS 64 位 7.x 以上了")])]),s._v(" "),n("li",[n("p",[s._v("系统盘")]),s._v(" "),n("p",[s._v("可选 SSD 和高性能普通盘，需要注意的是，系统盘选定后不能更换介质，大小也无法变更，只能通过挂载其他盘的方式来扩充")])]),s._v(" "),n("li",[n("p",[s._v("公网带宽")]),s._v(" "),n("p",[s._v("可选免费分配独立公网 IP")]),s._v(" "),n("p",[s._v("云服务器需要外网访问能力的时候，需要为云服务器分配公网 IP，如果云服务器不分配公网 IP，不支持外出流量，并且无法使用外网 IP 对外进行互相通信。")])]),s._v(" "),n("li",[n("p",[s._v("公共网关")]),s._v(" "),n("p",[s._v("视频中选购的时候有该选项，笔者购买的时候没有看到")]),s._v(" "),n("p",[n("img",{attrs:{src:t(637),alt:"image-20210225214202858"}})]),s._v(" "),n("p",[s._v("它的作用是这样的，说如果不绑定公共网关，该服务器是不能访问外网的，比如用户服务器调用第三方 API 接口，无法调用，只有通过 nginx 主/备这两台作为公共网关的机器去访问。")]),s._v(" "),n("p",[s._v("笔者对网络这一块不太熟悉，所以没有太明白其中的含义。")])])]),s._v(" "),n("p",[n("img",{attrs:{src:t(638),alt:"yunpc2"}})]),s._v(" "),n("ul",[n("li",[n("p",[s._v("安全组")]),s._v(" "),n("p",[s._v("可以配置入站规则和出站规则")]),s._v(" "),n("p",[s._v("入站：允许哪些来源的 IP 和端口访问我们的服务器")]),s._v(" "),n("p",[s._v("出站：允许我们的服务器可以访问哪些网络上的 IP 和 端口，只有这里允许了的，才可以访问出去，否则将不能访问到外网环境")])]),s._v(" "),n("li",[n("p",[s._v("其他的，就没有那么重要了")])])]),s._v(" "),n("h2",{attrs:{id:"安装-jdk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-jdk"}},[s._v("#")]),s._v(" 安装 JDK")]),s._v(" "),n("p",[s._v("购买云服务器后，厂商会提供一个公网 IP 和内网 IP，我们需要使用 SSH 工具连接到云服务器，随后就能在命令行中操作 linux 系统。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("公网 IP：39.106.215.59")])]),s._v(" "),n("li",[n("p",[s._v("内网 IP：172.17.41.6")])])]),s._v(" "),n("p",[s._v("若在本地虚拟机中操作 linux，只需要配置静态 IP 即可，比如：192.168.1.88")]),s._v(" "),n("p",[s._v("推荐使用 SecureCRT 工具来链接 SSH，它在 windows 和 mac 上都可以使用")]),s._v(" "),n("h3",{attrs:{id:"检查是否安装-jdk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检查是否安装-jdk"}},[s._v("#")]),s._v(" 检查是否安装 JDK")]),s._v(" "),n("p",[s._v("服务器安装 JDK 之前，先确保有没有默认安装 JDK，执行以下命令进行检查：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("java "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("version\nopenjdk version "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.8.0_222-ea"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OpenJDK")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runtime")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Environment")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0_222")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ea"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b03"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OpenJDK")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bit")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Server")]),s._v(" VM "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("25.222")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b03"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mixed mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("如果需要卸载，卸载步骤如下：")]),s._v(" "),n("h3",{attrs:{id:"卸载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[s._v("#")]),s._v(" 卸载")]),s._v(" "),n("p",[s._v("检查系统安装的 OpenJDK")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" openJdk -i\njava-1.8.0-openjdk-headless-1.8.0.222.b03-1.el7.x86_64\njava-1.8.0-openjdk-1.8.0.222.b03-1.el7.x86_64\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("删除以上 2 项的安装包并且，再次检查是否删除完成")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e --nodeps java-1.8.0-openjdk-headless-1.8.0.222.b03-1.el7.x86_64\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e --nodeps java-1.8.0-openjdk-1.8.0.222.b03-1.el7.x86_64\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再次查看")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" openJdk -i\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建目录，该目录用来存放 jdk")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/java\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建专门用来存放软件的临时目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /home/software\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过 ftp 工具将我们本地下载好的 jdk tar.gz 的包上传到该目录下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压 jdk 压缩包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf jdk-8u9191-linux-x64.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移动解压后的包到  /usr/java ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" jdk1.8.0_191/ /usr/java\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("添加环境变量")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 profile 文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 jdk 环境变量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/java/jdk1.8.0_191\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新 profile 文件，让环境变量生效")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"安装-tomcat"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-tomcat"}},[s._v("#")]),s._v(" 安装 Tomcat")]),s._v(" "),n("h3",{attrs:{id:"部署方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署方案"}},[s._v("#")]),s._v(" 部署方案")]),s._v(" "),n("p",[n("img",{attrs:{src:t(639),alt:"image-20210225222917112"}})]),s._v(" "),n("p",[s._v("这里会使用 3 台服务器：")]),s._v(" "),n("ul",[n("li",[s._v("tomcat-1 用来部署前端项目，后续会使用 nginx 来代替")]),s._v(" "),n("li",[s._v("tomcat-2 用来部署后端项目")]),s._v(" "),n("li",[s._v("mariaDB 数据库")])]),s._v(" "),n("p",[s._v("他们三台服务器一定要在同一个局域网中，并且互通.")]),s._v(" "),n("ul",[n("li",[s._v("192.168.56.105 部署前端项目")]),s._v(" "),n("li",[s._v("192.168.56.107 部署后端项目")]),s._v(" "),n("li",[s._v("192.168.56.108 部署数据库")])]),s._v(" "),n("h3",{attrs:{id:"部署前端-tomcat"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署前端-tomcat"}},[s._v("#")]),s._v(" 部署前端 tomcat")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署前端 tomcat")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study software"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar -zxvf apache-tomcat-9.0.24.tar.gz ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study software"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv apache-tomcat-9.0.24 tomcat-frontend")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study software"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv tomcat-frontend/ /usr/local/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study software"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/tomcat-frontend/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study tomcat-frontend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./bin/startup.sh ")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放 8080 端口，tomcat 默认是以该端口提供服务")]),s._v("\nfirewall-cmd --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp --permanent\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("访问 "),n("code",[s._v("http://192.168.56.105:8080/")]),s._v(" 检查 tomcat 是否已经启动。")]),s._v(" "),n("p",[s._v("如果是线上部署：你需要申请二级域名来指向对应的服务，如：")]),s._v(" "),n("ul",[n("li",[s._v("api.mrcode.cn：后端 restfull 服务")]),s._v(" "),n("li",[s._v("shop.mrcode.cn：天天吃货门户网站")]),s._v(" "),n("li",[s._v("center.mrcode.cn：天天吃货用户中心")])]),s._v(" "),n("p",[s._v("如果使用的是虚拟机，就使用 IP 访问吧")]),s._v(" "),n("h3",{attrs:{id:"部署后端-tomcat"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署后端-tomcat"}},[s._v("#")]),s._v(" 部署后端 tomcat")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署后端 tomcat")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study software"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv apache-tomcat-9.0.24 /usr/local/tomcat-api")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study software"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/tomcat-api/")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("访问 "),n("code",[s._v("http://192.168.56.107:8080/")])]),s._v(" "),n("h2",{attrs:{id:"centos7-防火墙-端口管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos7-防火墙-端口管理"}},[s._v("#")]),s._v(" centos7 防火墙/端口管理")]),s._v(" "),n("p",[s._v("防火墙")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙状态 ")]),s._v("\nsystemctl status firewalld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启防火墙 ")]),s._v("\nsystemctl start firewalld  \n关闭防火墙\nsystemctl stop firewalld\n开启防火墙 \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" firewalld start \n若遇到无法开启\n先用：systemctl unmask firewalld.service \n然后：systemctl start firewalld.service\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("端口管理")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询已开放的端口")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -anp\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加")]),s._v("\nfirewall-cmd --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp --permanent\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载")]),s._v("\nfirewall-cmd --reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询端口是否开放")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提示 yes，表示开启；no表示未开启。")]),s._v("\nfirewall-cmd --query-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除端口")]),s._v("\nfirewall-cmd --permanent --remove-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("如果是云服务器的话，直接在入站规则里面暴露端口")]),s._v(" "),n("p",[n("img",{attrs:{src:t(640),alt:"image-20210227223624775"}})]),s._v(" "),n("h2",{attrs:{id:"安装-mariadb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-mariadb"}},[s._v("#")]),s._v(" 安装 MariaDB")]),s._v(" "),n("h3",{attrs:{id:"安装-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://mariadb.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MariaDb 官网"),n("OutboundLink")],1),s._v("，"),n("a",{attrs:{href:"https://mariadb.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页面"),n("OutboundLink")],1),s._v("，找到如下图所示的地方")]),s._v(" "),n("p",[n("img",{attrs:{src:t(641),alt:"image-20210227224040366"}})]),s._v(" "),n("p",[s._v("这里就出来了 yum 安装方式了。可以在线安装，因为这里提供了国内的镜像")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MariaDB 10.4 CentOS repository list - created 2021-02-27 14:39 UTC")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://mariadb.org/download/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mariadb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MariaDB\nbaseurl "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/10.4/centos7-aarch64\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.tuna.tsinghua.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" MariaDB-server MariaDB-client\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这里采用离线安装（视频中当时没有提供国内镜像，速度很慢），"),n("a",{attrs:{href:"https://mariadb.com/kb/en/mariadb-installation-version-10121-via-rpms-on-centos-7/",target:"_blank",rel:"noopener noreferrer"}},[s._v("离线安装的官网文档在这里"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("img",{attrs:{src:t(642),alt:"image-20210227224655687"}})]),s._v(" "),n("p",[s._v("里面写都很详细了，需要下载好几个 rpm 包，有依赖包，还有 mariaDB ，需要下载下来，然后按照后面的安装步骤安装 rpm")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 准备好 rpm 包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mariadb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\ngalera-4-26.4.2-1.rhel7.el7.centos.x86_64.rpm  MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm\njemalloc-3.6.0-1.el7.x86_64.rpm                MariaDB-compat-10.4.8-1.el7.centos.x86_64.rpm\njemalloc-devel-3.6.0-1.el7.x86_64.rpm          MariaDB-server-10.4.8-1.el7.centos.x86_64.rpm\nMariaDB-client-10.4.8-1.el7.centos.x86_64.rpm\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖项")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" nmap "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" perl-DBI "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh jemalloc-3.6.0-1.el7.x86_64.rpm \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh jemalloc-devel-3.6.0-1.el7.x86_64.rpm \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm  MariaDB-compat-10.4.8-1.el7.centos.x86_64.rpm MariaDB-client-10.4.8-1.el7.centos.x86_64.rpm galera-4-26.4.2-1.rhel7.el7.centos.x86_64.rpm MariaDB-server-10.4.8-1.el7.centos.x86_64.rpm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("如果安装失败，如下所示")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mariadb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm  MariaDB-compat-10.4.8-1.el7.centos.x86_64.rpm MariaDB-client-10.4.8-1.el7.centos.x86_64.rpm galera-4-26.4.2-1.rhel7.el7.centos.x86_64.rpm MariaDB-server-10.4.8-1.el7.centos.x86_64.rpm")]),s._v("\n警告：MariaDB-common-10.4.8-1.el7.centos.x86_64.rpm: 头V4 DSA/SHA1 Signature, 密钥 ID 1bb943db: NOKEY\n错误：依赖检测失败：\n        mariadb-libs "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":10.1.0 与 MariaDB-compat-10.4.8-1.el7.centos.x86_64 冲突\n        mariadb-libs 被 MariaDB-compat-10.4.8-1.el7.centos.x86_64 取代\n        mariadb 被 MariaDB-client-10.4.8-1.el7.centos.x86_64 取代\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mariadb-libs 冲突，官网文档中也有解决方案")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 找到 mariadb-libs ，然后移除他们")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mariadb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ev --nodeps mariadb-libs-5.5.64-1.el7.x86_64")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果还有依赖冲突问题，就像上面那样，将他们移除")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 还有一些依赖问题需要解决，最后再尝试安装就成功了")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" boost-devel.x86_64\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("安装成功之后，注意下这里的打印信息")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Two all-privilege accounts were created.\nOne is root@localhost, it has no password, but you need to\nbe system "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" user to connect. Use, "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" example, "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql\nThe second is mysql@localhost, it has no password either, but\nyou need to be the system "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql'")]),s._v(" user to connect.\nAfter connecting you can "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" the password, "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you would need to be\nable to connect as any of these "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" with a password and without "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v("\n\nSee the MariaDB Knowledgebase at http://mariadb.com/kb or the\nMySQL manual "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" instructions.\n\nPlease report any problems at http://mariadb.org/jira\n\nThe latest information about MariaDB is available at http://mariadb.org/.\nYou can "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" additional information about the MySQL part at:\nhttp://dev.mysql.com\nConsider joining MariaDB's strong and vibrant community:\nhttps://mariadb.org/get-involved/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("上面说创建了两个没有密码的账户，他们都只支持 localhost 链接到 mysql 服务器：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("root@localhost")]),s._v("：需要使用系统账户 root 链接到 mysql 服务器")]),s._v(" "),n("li",[n("code",[s._v("mysql@localhost")]),s._v("：需要使用系统账户 mysql 链接")])]),s._v(" "),n("h3",{attrs:{id:"mariadb-启动与抽次安全配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mariadb-启动与抽次安全配置"}},[s._v("#")]),s._v(" mariaDb 启动与抽次安全配置")]),s._v(" "),n("p",[s._v("启动 mysql，他的启动命令和 mysql 是一致的，所以可以和 mysql 无缝切换")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("启动之后，再运行安全配置：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("After step "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", the installation will be completed. The last step will be to run mysql_secure_installation to secure the production server by dis allowing remote login "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root, creating root password and removing the "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database.\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" mysql_secure_installation\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("安装配置的文档也在上面的离线安装文档中有写明了，在页面最底部的第 5 步，"),n("a",{attrs:{href:"https://mariadb.com/kb/en/mysql_secure_installation/",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysql_secure_installation 的使用文档"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("mysql_secure_installation\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",[n("li",[s._v("输入当前密码，初次安装后是没有密码的，直接回车")]),s._v(" "),n("li",[s._v("新闻是否使用 "),n("code",[s._v("unix_socket")]),s._v(" 进行身份验证：n")]),s._v(" "),n("li",[s._v("为 root 设置密码：y")]),s._v(" "),n("li",[s._v("输入 root 的新密码：root")]),s._v(" "),n("li",[s._v("确认输入 root 的新密码：root")]),s._v(" "),n("li",[s._v("是否移除匿名用户：y")]),s._v(" "),n("li",[s._v("禁止 root 远程登录?：n")]),s._v(" "),n("li",[s._v("是否删除数据库中的 test 库：y")]),s._v(" "),n("li",[s._v("是否重新加载 "),n("code",[s._v("privilege")]),s._v(" 表的内容：y")])]),s._v(" "),n("p",[s._v("初始化完成。")]),s._v(" "),n("h3",{attrs:{id:"配置远程登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置远程登录"}},[s._v("#")]),s._v(" 配置远程登录")]),s._v(" "),n("p",[s._v("如果你尝试使用 UI 工具远程连接到 192.168.56.108:3306 的 mysql 服务器，会提示")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("HY000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1130")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" null,  message from server: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"Host 'gateway' is not allowed to connect to this MariaDB server\"")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("被拒绝了（当前前提要开放 3306 端口号）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在服务器上进入 mysql 控制台")]),s._v("\nmysql -u root -p\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加 root 远程登录权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里 root 密码还是写的 root")]),s._v("\ngrant all privileges on *.* to "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root密码'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush privileges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"准备生产环境所需要的表结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#准备生产环境所需要的表结构"}},[s._v("#")]),s._v(" 准备生产环境所需要的表结构")]),s._v(" "),n("p",[s._v("可以使用 Navicat Premium 软件完成，表结构和数据的拷贝。")]),s._v(" "),n("p",[s._v("有一些初始数据是需要的：比如商品相关数据，为了简单，这里直接将测试环境所有数据都复制过去。")])])}),[],!1,null,null,null);a.default=e.exports}}]);